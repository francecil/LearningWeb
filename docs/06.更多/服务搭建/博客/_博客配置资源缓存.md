---
title: 博客配置资源缓存
date: 2023-04-17 12:49:33
permalink: /pages/182b13/
categories: 
  - 更多
  - 服务搭建
  - 博客
tags: 
  - 
titleTag: 草稿
---

## github page
github page 默认给所有资源(包括 html 文件) 设置了 cache-control: 10min
如果超过强缓存时间，会走 304 协商缓存

该缓存设置目前不支持调整

能理解 github 设置此策略的含义：面向通用方案，有些仓库的资源是不带 hash 的，需要有更新机制

但是对于带打包的博客这类的页面，我们希望是:
- html 文件的缓存时间较短，10min OK
- 其他资源的缓存时间可以设置久一点，比如 7 day

## vercel

目前博客是部署在 vercel 上，默认没有强缓存，都是协商缓存

需要在最终产物目录下增加 `vercel.json` 文件
> 对于 vuepress 项目，即在 `docs/.vuepress/public/vercel.json`

配置示例：

```json
{
    "headers": [
      {
        "source": "(.*)",
        "headers": [
          {
            "key": "Cache-Control",
            "value": "public, s-maxage=86400, max-age=86400"
          }
        ]
      }
    ]
  }
```

该文件将决定访问路径的响应头，详见：[How to Configure the Cache-Control Response Header in Vercel Projects](https://vercel.com/guides/how-to-configure-the-cache-control-response-header-in-vercel-projects)